<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tenor+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tienne:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="payment-styles.css">
</head>

<body>

    <nav class="navbar">
        <div class="nav-left">
            <a id="logo" href="/home">Élégance</a>
            <a href="/filter-woman">ผู้หญิง</a>
            <a href="/filter-man">ผู้ชาย</a>
        </div>
        <div class="nav-right">
            <a class="fa-regular fa-user icon" onclick="logout(event)"></a>
            <a class="fa-solid fa-bag-shopping icon" href="/shopping-bag"></a>
        </div>
    </nav>

    <section class="bestseller">
        <h1>FACTIO</h1>
        <h3>EDIT YOUR BILLING ADDRESS</h3>
        <h3>To place order, you must first fill in your account. You can change them in your account at any time.</h3>

        <section class="billing-form">
            <form id="paymentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="first-name">Name</label>
                        <input type="text" id="first-name" name="first-name">
                    </div>

                    <div class="form-group">
                        <label for="surname">SureName</label>
                        <input type="text" id="surname" name="surname">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">EMAIL</label>
                        <input type="email" id="email" name="email">
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input type="tel" id="phone" name="phone">
                    </div>
                </div>

                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address">
                </div>
            </form>
        </section>
    </section>

    <div class="all-continue">
        <button class="button" onclick="submitForm(event)">ORDER</button>
    </div>

    <footer class="footer">
        <div class="footer-column">
            <h4>ABOUT US</h4>
            <p>CAREERS</p>
            <p>FAQs</p>
            <p>RETURNS / EXCHANGES</p>
            <p>CONTACT US</p>
            <p>PRIVACY POLICY</p>
            <p>SHOP FASTER WITH THE APP</p>
        </div>

        <div class="footer-column">
            <h4>SIGN UP AND SAVE</h4>
            <p>Subscribe to get special offers, free giveaways</p>
        </div>

        <div class="footer-column">
            <h4>STORE LOCATION</h4>
            <p><strong>LAHORE</strong></p>
            <p>22-A, Block K Gulberg-II Lahore, Pakistan</p>
            <p><strong>EMPORIUM MALL</strong></p>
            <p>T01, Level 3</p>
            <p><strong>ISLAMABAD</strong></p>
            <p>Sumbal Rd, F-10 Markaz F10/4 Islamabad</p>
            <p><strong>KARACHI</strong></p>
            <p>LAMA at the mezzanine - Allure Beauty, Dolmen Mall Clifton</p>
        </div>
    </footer>

    <div class="footer-bottom">
        © 2024 Factio
    </div>

<script>
function logout(event) {
    event.preventDefault();
    if (confirm("คุณต้องการออกจากระบบหรือไม่ ?")) {
        window.location.href = "/signout";
    }
}

function submitForm(event) {
    event.preventDefault();

    let firstName = document.getElementById("first-name").value.trim();
    let surname = document.getElementById("surname").value.trim();
    let email = document.getElementById("email").value.trim();
    let phone = document.getElementById("phone").value.trim();
    let address = document.getElementById("address").value.trim();
    const customerId = "<%= customer_id %>";

    if (!firstName || !surname || !email || !phone || !address) {
        alert("กรุณากรอกข้อมูลให้ครบทุกช่อง");
        return;
    }

    fetch("/payment/clear-cart", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ customer_id: customerId })
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            alert("Thank you for your order!");
            window.location.href = "/home";
        } else {
            alert(data.error || "Error occurred while processing your order.");
        }
    })
    .catch(err => {
        console.error("Error:", err);
        alert("Error occurred while processing your order.");
    });
}
</script>

</body>
</html>